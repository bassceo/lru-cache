# Лабораторная работа №2
## Лукьянчук Ярослав P3323 (367361)
```json
{
  "target_os": "Linux",
  "cache_policy": "LRU"
}
```

<!-- [Отчёт](./reports/REPORT.md)  
[Отчёт PDF](./reports/report.pdf) -->

---

## Задание

В данной лабораторной работе необходимо реализовать блочный кэш в пространстве пользователя в виде динамической библиотеки (**.so**). Политику вытеснения (в данном случае **LRU**) и другие элементы задания определяет преподаватель.

API библиотеки должно предоставлять следующие функции:
- **Открытие файла**: `int lab2_open(const char *path);`
- **Закрытие файла**: `int lab2_close(int fd);`
- **Чтение**: `ssize_t lab2_read(int fd, void *buf, size_t count);`
- **Запись**: `ssize_t lab2_write(int fd, const void *buf, size_t count);`
- **Перестановка позиции**: `off_t lab2_lseek(int fd, off_t offset, int whence);`
- **Синхронизация данных**: `int lab2_fsync(int fd);`

Операции с диском должны производиться с использованием `O_DIRECT`, в обход системного **page cache**. Блоки кэша должны иметь фиксированный размер, кратный размеру страницы (например, 4КБ). Политика вытеснения — **LRU**.

Также необходимо:
1. Взять одну из программ-нагрузчиков, созданных в ЛР №1, и адаптировать её для использования разработанного кэша (вместо обычных системных вызовов чтения/записи).  
2. Сравнить производительность до и после внедрения собственного блочного кэша.  
3. Сделать вывод о влиянии пользовательского кэша на операции чтения и записи.

---

## Ограничения
- Использовать **C** или **C++**.
- При работе с **Unix**-подобными системами применять прямые вызовы libc (без высокоуровневых обёрток).
- Если по варианту задана политика **Optimal**, нужно предоставить дополнительный интерфейс подсказок (но здесь указана **LRU**, поэтому не требуется).
- Необходимо корректно обрабатывать ошибки и особые случаи (например, запись за конец файла).